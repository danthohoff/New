import matplotlib.pyplot as plt

# Ergebnisse aus dem Modell
coefs = model_multi.params
beta_hln = coefs["LU_HLN_perHalt"]
beta_fln = coefs["LU_Flaeche_perHalt"]

plt.figure(figsize=(6,4))
plt.bar(["HLN pro Halt", "Fläche pro Halt"], [beta_hln, beta_fln], color=["red","blue"])
plt.ylabel("Koeffizient (Einfluss auf PÜ-Quote)")
plt.title("Multivariate Regression: LU-Einfluss")
for i,v in enumerate([beta_hln, beta_fln]):
    plt.text(i, v, f"{v:.3f}", ha="center", va="bottom")
plt.show()


from statsmodels.graphics.regressionplots import plot_partregress_grid

fig = plot_partregress_grid(model_multi)
fig.tight_layout()
plt.show()


import numpy as np
from mpl_toolkits.mplot3d import Axes3D

X = df[["LU_HLN_perHalt", "LU_Flaeche_perHalt"]]
X = sm.add_constant(X)
df["yhat"] = model_multi.predict(X)

fig = plt.figure(figsize=(8,6))
ax = fig.add_subplot(111, projection="3d")
ax.scatter(df["LU_HLN_perHalt"], df["LU_Flaeche_perHalt"], df["PÜ alle"], alpha=0.4, label="Daten")
ax.scatter(df["LU_HLN_perHalt"], df["LU_Flaeche_perHalt"], df["yhat"], color="red", alpha=0.6, label="Vorhersage")
ax.set_xlabel("LU HLN / Halt")
ax.set_ylabel("LU Fläche / Halt")
ax.set_zlabel("PÜ Quote")
ax.legend()
plt.show()